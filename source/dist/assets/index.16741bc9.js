var X=Object.defineProperty;var Y=(e,t,a)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var g=(e,t,a)=>(Y(e,typeof t!="symbol"?t+"":t,a),a);import{d as q,c as Z,a as x,b as ee,q as te,P as se,e as ae,W as oe,O as N,_ as L,V as B,B as re,r as p,o as m,f as _,g as ue,h as ne,i as ie,j as ce,k as M,l as i,w as n,m as A,n as l,t as C,F as W,p as le,s as de,u as d,v as me,x as he,Q as _e,y as pe,N as fe}from"./vendor.825dd2c3.js";const ve=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const r of u.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function a(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerpolicy&&(u.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?u.credentials="include":s.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(s){if(s.ep)return;s.ep=!0;const u=a(s);fetch(s.href,u)}};ve();const ge="modulepreload",V={},Ae="/",f=function(t,a){return!a||a.length===0?t():Promise.all(a.map(o=>{if(o=`${Ae}${o}`,o in V)return;V[o]=!0;const s=o.endsWith(".css"),u=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${u}`))return;const r=document.createElement("link");if(r.rel=s?"stylesheet":ge,s||(r.as="script",r.crossOrigin=""),r.href=o,document.head.appendChild(r),s)return new Promise((h,v)=>{r.addEventListener("load",h),r.addEventListener("error",v)})})).then(()=>t())},P="/api/account/v1",Ee="/api/account/v2";async function be(){return(await c.get(`${P}/me`)).data}async function Ot(e){return(await c.get(`${P}/Account/${e}`)).data}async function Tt(e){return(await c.get(`${Ee}/Account`,{params:e})).data}async function Rt(e){return(await c.delete(`${P}/Account/${e}/avatar`)).data}async function Nt(e,t){return(await c.patch(`${P}/Account/${t}`,{avatarId:e})).data}var y=(e=>(e.None="None",e.Male="Male",e.Female="Female",e))(y||{});const U=[{label:"\u2014",value:y.None},{label:"\u041C\u0443\u0436\u0441\u043A\u043E\u0439",value:y.Male},{label:"\u0416\u0435\u043D\u0441\u043A\u0438\u0439",value:y.Female}];var z=q("account",{state:()=>({addresses:[],avatarId:"",birthDate:"",claims:{claims:{},tokenClaims:{}},consent:!1,creationDate:"",departmentId:null,email:null,emailStatus:null,firstName:null,lastName:null,middleName:null,gender:y.None,hasSignature:null,isEnabled:!1,login:"",misId:null,misLifeId:null,misLifeLogin:null,misLogin:null,phoneNumber:null,role:"",snils:null,source:null,userApp:null,userId:"",userPhones:[],status:"Offline",userProfile:null}),actions:{async getPersonalData(){const e=await be();return this.addresses=e.addresses,this.avatarId=e.avatarId,this.birthDate=e.birthDate,this.claims=e.claims,this.consent=e.consent,this.creationDate=e.creationDate,this.departmentId=e.departmentId,this.email=e.email,this.emailStatus=e.emailStatus,this.firstName=e.firstName,this.lastName=e.lastName,this.middleName=e.middleName,this.gender=e.gender,this.hasSignature=e.hasSignature,this.isEnabled=e.isEnabled,this.login=e.login,this.misId=e.misId,this.misLifeId=e.misLifeId,this.misLifeLogin=e.misLifeLogin,this.misLogin=e.misLogin,this.phoneNumber=e.phoneNumber,this.role=e.role,this.snils=e.snils,this.source=e.source,this.userApp=e.userApp,this.userId=e.userId,this.userPhones=e.userPhones,this.userProfile=e.userProfile,e}},getters:{isAdmin(){return this.role==="DoctorAdmin"},isRater(){return this.userProfile==="DoctorEmpathyProfile"},FIO(){return this.firstName?`${this.firstName} ${this.middleName} ${this.lastName}`:"\u2014"},userName(e){return e.firstName?`${e.firstName} ${e.lastName}`:e.login?e.login:""},getGender(){return(U.find(t=>t.value===this.gender)||U[0]).label}}});const Ie=()=>f(()=>import("./Auth.cede7cd7.js"),["assets/Auth.cede7cd7.js","assets/Auth.222ec951.css","assets/vendor.825dd2c3.js","assets/vendor.4e09fa55.css"]),j=()=>f(()=>import("./Lobby.35c22b4e.js"),["assets/Lobby.35c22b4e.js","assets/vendor.825dd2c3.js","assets/vendor.4e09fa55.css"]),ye=()=>f(()=>import("./Index.969741e1.js"),["assets/Index.969741e1.js","assets/Index.7d7cc8a2.css","assets/vendor.825dd2c3.js","assets/vendor.4e09fa55.css","assets/forrmaters.4a830e90.js","assets/date.7878141a.js","assets/index.056d9d85.js","assets/v1.ca8a8197.js"]),we=()=>f(()=>import("./DocSpecialities.aae154f6.js"),["assets/DocSpecialities.aae154f6.js","assets/DocSpecialities.1483f281.css","assets/vendor.825dd2c3.js","assets/vendor.4e09fa55.css","assets/index.056d9d85.js","assets/notify.a97b9367.js","assets/v1.ca8a8197.js"]),Pe=()=>f(()=>import("./Consultations.f05cc67f.js"),["assets/Consultations.f05cc67f.js","assets/Consultations.b125609d.css","assets/vendor.825dd2c3.js","assets/vendor.4e09fa55.css","assets/index.056d9d85.js","assets/v1.ca8a8197.js","assets/notify.a97b9367.js","assets/forrmaters.4a830e90.js","assets/date.7878141a.js","assets/preloader.bffd7f9b.js","assets/preloader.d69c9500.css"]),De=()=>f(()=>import("./Doctors.d8235261.js"),["assets/Doctors.d8235261.js","assets/Doctors.d81cf995.css","assets/vendor.825dd2c3.js","assets/vendor.4e09fa55.css","assets/index.056d9d85.js","assets/forrmaters.4a830e90.js","assets/notify.a97b9367.js","assets/preloader.bffd7f9b.js","assets/preloader.d69c9500.css"]),$e=()=>f(()=>import("./ModerationOfReviews.575b7d13.js"),["assets/ModerationOfReviews.575b7d13.js","assets/ModerationOfReviews.0a976a1f.css","assets/vendor.825dd2c3.js","assets/vendor.4e09fa55.css","assets/index.1178ea57.js","assets/notify.a97b9367.js"]),Se=()=>f(()=>import("./DoctorRating.e0226428.js"),["assets/DoctorRating.e0226428.js","assets/DoctorRating.c76ed075.css","assets/vendor.825dd2c3.js","assets/vendor.4e09fa55.css","assets/index.1178ea57.js","assets/date.7878141a.js","assets/index.056d9d85.js","assets/notify.a97b9367.js","assets/forrmaters.4a830e90.js"]),Ce=()=>f(()=>import("./Ui.257f7230.js"),["assets/Ui.257f7230.js","assets/Ui.55c9cb4c.css","assets/vendor.825dd2c3.js","assets/vendor.4e09fa55.css"]),D=Z({history:x(),routes:[{path:"/login",name:"login",meta:{title:"\u0412\u0445\u043E\u0434"},component:Ie},{path:"/lobby",name:"op-doc",meta:{title:"\u041E\u0447\u0435\u0440\u0435\u0434\u044C"},component:j},{path:"/lobby/a",name:"doc-admin",meta:{title:"\u041C\u043E\u043D\u0438\u0442\u043E\u0440\u0438\u043D\u0433"},component:ye},{path:"/calendar",name:"doc-calendar",meta:{title:"\u041A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u044C"},component:j},{path:"/specialties",name:"doc-specialties",meta:{title:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u043F\u0435\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u044F\u043C\u0438"},component:we},{path:"/consultations",name:"doc-consultations",meta:{title:"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043A\u043E\u043D\u0441\u0443\u043B\u044C\u0442\u0430\u0446\u0438\u0439"},component:Pe},{path:"/doctors",name:"doc-edit",meta:{title:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u0440\u0430\u0447\u0430"},component:De},{path:"/moderator",name:"doc-moderator",meta:{title:"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043A\u043E\u043D\u0441\u0443\u043B\u044C\u0442\u0430\u0446\u0438\u0439"},component:$e},{path:"/rating-questions",name:"rating-questions",meta:{title:"\u041E\u0446\u0435\u043D\u043A\u0430 \u043A\u043E\u043D\u0441\u0443\u043B\u044C\u0442\u0430\u0446\u0438\u0439"},component:Se},{path:"/ui",name:"ui",meta:{title:"Ui"},component:Ce},{path:"/",redirect:{name:"login"}}]});D.beforeEach(async(e,t,a)=>{document.title=e.meta.title;const o=k(),s=z();if(e.name!=="login")if(o.hasAuth)o.hasAuth&&!s.userId&&await s.getPersonalData();else try{await o.refreshAuth(),await s.getPersonalData()}catch{a({name:"login"})}a()});const c=ee.create({baseURL:{}.VITE_API_URL,paramsSerializer:e=>te.stringify(e,{arrayFormat:"none"})});c.interceptors.response.use(function(e){return e},async function(e){return e.response.status===401&&await D.replace("/login"),Promise.reject(e)});var J=(e=>(e.AndroidApp="AndroidApp",e.IOSApp="iOSApp",e.WebClientApp="WebClientApp",e.WebAdminApp="WebAdminApp",e.Unknown="Unknown",e))(J||{}),Q=(e=>(e.RenHealth="RenHealth",e.Budu="Budu",e))(Q||{});const $="/api/auth/v3/auth";function Oe(){let e=window.localStorage.getItem("deviceId");return e||(e=(new Date().getTime()/1e3*Math.random()|0).toString(),window.localStorage.setItem("deviceId",e)),e}async function Te(e){const t=encodeURIComponent(e),a={userAppType:J.WebClientApp,userAppCode:Q.Budu,deviceName:se.is.name,deviceId:Oe()},{data:o}=await c.post(`${$}/login-sms`,a,{params:{login:t}});return o}async function Re({confirmationToken:e,confirmationCode:t}){const{data:a}=await c.post(`${$}/sms/${e}/web`,{},{params:{confirmationCode:t}});return a}async function Ne(e){const{data:t}=await c.post(`${$}/token/refresh`,{refreshToken:e});return t}async function Le(){await c.post(`${$}/logout/web`)}var k=q("auth",{state:()=>({hasAuth:!1,accessExpireTime:"",accessToken:null,refreshExpireTime:"",refreshToken:null,userId:""}),actions:{async getSMSCode(e){return Te(e)},setAuth(e){this.hasAuth=!0,this.accessExpireTime=e.accessExpireTime,this.accessToken=e.accessToken,this.refreshExpireTime=e.refreshExpireTime,this.refreshToken=e.refreshToken,this.userId=e.userId,window.localStorage.setItem("AUTH_DATA",JSON.stringify({refreshToken:e.refreshToken,refreshExpireTime:e.refreshExpireTime})),c.defaults.headers.common={Authorization:`Bearer ${this.accessToken}`}},async logout(){localStorage.removeItem("AUTH_DATA"),await Le(),this.hasAuth=!1,this.accessExpireTime="",this.accessToken=null,this.refreshExpireTime="",this.refreshToken=null,this.userId="",await D.replace("/login"),window.location.reload()},async refreshAuth(){const e=localStorage.getItem("AUTH_DATA");if(!e)return this.logout();const t=await Ne(JSON.parse(e).refreshToken);this.setAuth(t)},async login({confirmationCode:e,confirmationToken:t}){const a=await Re({confirmationToken:t,confirmationCode:e});this.setAuth(a)}}});const G="/api/renfiles/v1",O={};function Be(e){const t={noCache:!1,preview:!1,scale:.5},a=typeof e=="string"?Object.assign({},t,{fileId:e}):Object.assign({},t,e),o=[.5,.4,.3,.2,.1];return a.scale=o.includes(a.scale)?a.scale:.5,a}async function ke(e){const t=Be(e),{noCache:a,preview:o,scale:s,fileId:u}=t,r=o?u+"_"+s:u,h=!a&&O[r]?O[r]:null,v=I=>{a||(O[r]=I)};if(h)return h;const b=c.get(`${G}/file/${u}${o?"/preview":""}`,{params:{scale:o?s:void 0},responseType:"arraybuffer"}).then(I=>{const S=new Blob([I.data]),E=URL.createObjectURL(S);return v(Promise.resolve(E)),E});return v(b),b}async function Lt(e){const{data:t}=await c.post(`${G}/file`,e);return t}var He=Object.defineProperty,Fe=Object.getOwnPropertyDescriptor,H=(e,t,a,o)=>{for(var s=o>1?void 0:o?Fe(t,a):t,u=e.length-1,r;u>=0;u--)(r=e[u])&&(s=(o?r(t,a,s):r(s))||s);return o&&s&&He(t,a,s),s};let w=class extends B{constructor(){super(...arguments);g(this,"avatarId");g(this,"url","")}async getAvatar(){try{this.url=await ke(this.avatarId)}catch{this.url=""}}async onAvatarChanged(e){e?await this.getAvatar():this.url=""}async mounted(){this.avatarId?await this.getAvatar():this.url=""}};H([ae(String)],w.prototype,"avatarId",2);H([oe("avatarId")],w.prototype,"onAvatarChanged",1);w=H([N({components:{BAvatar:re}})],w);const Ve=w;function Ue(e,t,a,o,s,u){const r=p("b-avatar");return m(),_(r,{size:"m",class:"docHeader__avatar",url:e.url},null,8,["url"])}var je=L(Ve,[["render",Ue]]),qe="/img/budu-logo.svg";var Me=Object.defineProperty,We=Object.getOwnPropertyDescriptor,ze=(e,t,a,o)=>{for(var s=o>1?void 0:o?We(t,a):t,u=e.length-1,r;u>=0;u--)(r=e[u])&&(s=(o?r(t,a,s):r(s))||s);return o&&s&&Me(t,a,s),s};let T=class extends B{constructor(){super(...arguments);g(this,"authStore",k());g(this,"accountStore",z());g(this,"isProfileVisible",!1)}get isAdmin(){return this.accountStore.isAdmin}get isRater(){return this.accountStore.isRater}get avatarId(){return this.accountStore.avatarId}get claims(){return this.accountStore.claims}async logout(){await this.authStore.logout()}};T=ze([N({components:{BDropdown:ue,BDropdownItem:ne,BIcon:ie,BModal:ce,UserAvatar:je}})],T);const Je=T,F=e=>(le("data-v-05e75bbe"),e=e(),de(),e),Qe={class:"docHeader"},Ge={class:"docHeader__col"},Ke=F(()=>i("img",{class:"docHeader__logo",src:qe},null,-1)),Xe=d(" \u041F\u0440\u0438\u0435\u043C\u043D\u0430\u044F "),Ye=d(" \u041C\u043E\u043D\u0438\u0442\u043E\u0440\u0438\u043D\u0433 "),Ze=d(" \u041A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u044C "),xe=d(" \u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u043F\u0435\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u044F\u043C\u0438 "),et=d(" \u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043A\u043E\u043D\u0441\u0443\u043B\u044C\u0442\u0430\u0446\u0438\u0439 "),tt=d(" \u041E\u0446\u0435\u043D\u043A\u0430 \u043A\u043E\u043D\u0441\u0443\u043B\u044C\u0442\u0430\u0446\u0438\u0439 "),st=d(" \u0412\u0440\u0430\u0447\u0438 "),at=d(" \u041C\u043E\u0434\u0435\u0440\u0430\u0446\u0438\u044F \u043E\u0442\u0437\u044B\u0432\u043E\u0432 "),ot={class:"docHeader__col"},rt=d(" \u041F\u0440\u043E\u0444\u0438\u043B\u044C "),ut={class:"docHeader__item"},nt=d(" \u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432 "),it=d(" \u0412\u044B\u0439\u0442\u0438 "),ct={class:"header-profile"},lt={class:"header-profile__row"},dt={class:"header-profile__row b-h3"},mt=F(()=>i("div",{class:"header-profile__row b-caption-s"},"\u0424\u0418\u041E",-1)),ht={class:"b-text-m"},_t=F(()=>i("div",{class:"header-profile__row b-caption-s"},"\u041F\u043E\u043B",-1)),pt={class:"b-text-m"};function ft(e,t,a,o,s,u){const r=p("router-link"),h=p("user-avatar"),v=p("b-icon"),b=p("b-dropdown-item"),I=p("b-dropdown"),S=p("b-modal");return m(),M(W,null,[i("header",Qe,[i("div",Ge,[Ke,!e.isAdmin&&!e.isRater?(m(),_(r,{key:0,class:"docHeader__link",to:{name:"op-doc"}},{default:n(()=>[Xe]),_:1})):A("",!0),e.isAdmin&&!e.isRater?(m(),_(r,{key:1,class:"docHeader__link",to:{name:"doc-admin"}},{default:n(()=>[Ye]),_:1})):A("",!0),l(r,{class:"docHeader__link",to:{name:"doc-calendar"}},{default:n(()=>[Ze]),_:1}),e.isAdmin&&!e.isRater?(m(),_(r,{key:2,class:"docHeader__link",to:{name:"doc-specialties"}},{default:n(()=>[xe]),_:1})):A("",!0),e.claims.claims&&!e.claims.claims.isOutsource?(m(),_(r,{key:3,class:"docHeader__link",to:{name:"doc-consultations"}},{default:n(()=>[et]),_:1})):A("",!0),e.claims.claims&&!e.claims.claims.isOutsource?(m(),_(r,{key:4,class:"docHeader__link",to:{name:"rating-questions"}},{default:n(()=>[tt]),_:1})):A("",!0),e.isAdmin&&!e.isRater?(m(),_(r,{key:5,class:"docHeader__link",to:{name:"doc-edit"}},{default:n(()=>[st]),_:1})):A("",!0),e.isAdmin&&!e.isRater?(m(),_(r,{key:6,class:"docHeader__link",to:{name:"doc-moderator"}},{default:n(()=>[at]),_:1})):A("",!0)]),i("div",ot,[l(h,{"avatar-id":e.avatarId},null,8,["avatar-id"]),l(I,{label:e.accountStore.userName,"button-type":"uncolored"},{default:n(()=>[l(b,null,{default:n(()=>[i("div",{class:"docHeader__item",onClick:t[0]||(t[0]=E=>e.isProfileVisible=!0)},[l(v,{class:"docHeader__icon",name:"doctor"}),rt])]),_:1}),l(b,null,{default:n(()=>[i("div",ut,[l(v,{class:"docHeader__icon",name:"settings-2"}),nt])]),_:1}),l(b,null,{default:n(()=>[i("div",{class:"docHeader__item",onClick:t[1]||(t[1]=(...E)=>e.logout&&e.logout(...E))},[l(v,{class:"docHeader__icon",name:"logout"}),it])]),_:1})]),_:1},8,["label"])])]),l(S,{modelValue:e.isProfileVisible,"onUpdate:modelValue":t[2]||(t[2]=E=>e.isProfileVisible=E)},{default:n(()=>[i("div",ct,[i("div",lt,[l(h,{"avatar-id":e.avatarId,size:"xl"},null,8,["avatar-id"])]),i("div",dt,C(e.accountStore.userName),1),mt,i("div",ht,C(e.accountStore.FIO),1),_t,i("div",pt,C(e.accountStore.getGender),1)])]),_:1},8,["modelValue"])],64)}var vt=L(Je,[["render",ft],["__scopeId","data-v-05e75bbe"]]);var gt=Object.defineProperty,At=Object.getOwnPropertyDescriptor,Et=(e,t,a,o)=>{for(var s=o>1?void 0:o?At(t,a):t,u=e.length-1,r;u>=0;u--)(r=e[u])&&(s=(o?r(t,a,s):r(s))||s);return o&&s&&gt(t,a,s),s};let R=class extends B{constructor(){super(...arguments);g(this,"authStore",k())}get hasAuth(){return this.authStore.hasAuth}};R=Et([N({components:{DocHeader:vt}})],R);const bt=R,It=d("Header");function yt(e,t,a,o,s,u){const r=p("doc-header"),h=p("router-view");return m(),M(W,null,[e.hasAuth?(m(),_(r,{key:0},{default:n(()=>[It]),_:1})):A("",!0),l(h)],64)}var wt=L(bt,[["render",yt]]),Pt=me();class Dt{constructor(){g(this,"events",{})}$on(t,a){this.events[t]=this.events[t]||[],this.events[t].push(a)}$off(t,a){if(this.events[t]){for(let o=0;o<this.events[t].length;o++)if(this.events[t][o]===a){this.events[t].splice(o,1);break}}}$emit(t,a){this.events[t]&&this.events[t].forEach(function(o){o(a)})}}var $t=new Dt;const K=he(wt);K.config.globalProperties.$bus=$t;K.use(_e,{lang:pe,plugins:{Notify:fe}}).use(Pt).use(D).mount("#app");export{$t as E,je as U,qe as _,z as a,Ot as b,ke as c,Rt as d,Tt as g,c as h,Lt as p,Nt as s,k as u};
